"Алгоритмы в высоконагруженных системах"

created by aloshkarev for sibsutis&yadro

# High-Load Storage

Для закрепления теории мы не просто будем разрабатывать базу данных, мы построим ключевые компоненты **оператора мобильной связи** (естественно в упрощенном варианте):
1. **HLR (Home Location Register)** — быстрая база абонентов (изучим структуру SkipList и ее преимущества).
2. **CDR Storage (Call Detail Records)** — надежное хранилище логов звонков (основой будет структура деревьев LSM).
3. **Anti-Fraud & Analytics** — защита от DDoS и поиск аномалий (здесь мы на практике применим фильтр Блума, потоковые алгоритмы).

##Лабораторные работы

### Л/р 1: HLR и In-Memory хранилище
Мы создадим быстрый реестр абонентов.
- **Задача**: Хранить миллионы IMSI и быстро обновлять их статусы.
- **Алгоритм**: SkipList (вероятностная структура данных).
- **Результат**: Работающий `kvtool` (наша учебная консольная утилита) с бэкендом на SkipList.
- **Дополнительные материалы к изучению**: `docs/day1_hls_map_reduce_skiplist.md`

### Л/р 2: CDR хранилище и диск
Мы построим систему хранения биллинга.
- **Задача**: Записывать тысячи событий в секунду без случайных операций I/O.
- **Алгоритм**: LSM Tree (Log-Structured Merge Tree) = Memtable + WAL + SSTable.
- **Результат**: БД, переживающая рестарты и умеющая сжимать данные.
- **Материалы**: `docs/day2_lsm_storage.md`

### Л/р 3: Fraud Detection и оптимизация решения
Мы защитим диск от лишней нагрузки и посчитаем аналитику.
- **Задача**: Быстро отсекать запросы к несуществующим ключам и искать наиболее активных абонентов.
- **Алгоритмы**: Bloom Filter, Count-Min Sketch.
- **Результат**: Ускорение чтений на miss-запросах и отчет по трафику с минимальной памятью.
- **Материалы**: `docs/day3_bloom_cluster_streaming.md`

## Быстрый старт

### 1. Проверка окружения
```bash
make test
```

### 2. Демо WordCount
```bash
go run ./cmd/kvtool wordcount -in ./testdata/text_small.txt
```

### 3. Генерация нагрузки (будем развивать функционал во 2й и 3й день)
```bash
# Равномерная нагрузка (Write/Read)
go run ./cmd/kvtool load -count 10000

# Неравномерная (Zipf) нагрузка для тестов кэша и аналитики
go run ./cmd/kvtool load -count 10000 -zipf 1.1
```

## Как сдавать задания
Проверки разбиты по дням через теги сборки:

- **День 1**: `make test-day1`
- **День 2**: `make test-day2`
- **День 3**: `make test-day3`

## Структура репозитория
- `docs/` — Документация и теория.
- `assignments/` — Задания с чеклистами.
- `internal/` — Каркас кода:
  - `skiplist/` — In-Memory движок (для заданий на 1й день).
  - `lsm/`, `sstable/`, `wal/` — Дисковый движок (для заданий на 2й день).
  - `bloom/`, `stream/` — Вероятностные структуры (для заданий на 3й день).
- `cmd/kvtool` — Консольная утилита для тестов и бенчмарков решений.
